// jump word (and select)     : Ctrl + Left/Right (+ Shift) (native)
// jump paragraph (and select): Ctrl + Up/Down (+ Shift)    (custom)
// jump newline (and select)  : Alt + Left/Right (+ Shift)  (custom)
// move line up/down          : Alt + Up/Down               (native)
//
// cancel all completions (Intellisense then AI): Esc    (native)
// insert AI completion                         : Insert (custom)
// insert IntelliSense completion               :    Tab (native but was overridden by AI)
// Note: Enter is for newlines (native) exclusively (custom), (same for Tab but exception above), but that setting is in settings.json.
// This means: AI reacts exclusively to Insert/Esc, IntelliSense exclusively to Tab/Esc, and Enter/Tab are safe keys.
[
    // Alt + Left/Right (+ Shift) = jump newline (and select).
    // Extends existing Ctrl + Left/Right (+ Shift) to lines
    {
        "key": "alt+left",
        "command": "cursorMove",
        "when": "editorTextFocus",
        "args": {
            "to": "wrappedLineStart"
        }
    },
    {
        "key": "alt+right",
        "command": "cursorMove",
        "when": "editorTextFocus",
        "args": {
            "to": "wrappedLineEnd"
        }
    },
    {
        "key": "alt+shift+left",
        "command": "cursorMove",
        "when": "editorTextFocus",
        "args": {
            "to": "wrappedLineStart",
            "select": true
        }
    },
    {
        "key": "alt+shift+right",
        "command": "cursorMove",
        "when": "editorTextFocus",
        "args": {
            "to": "wrappedLineEnd",
            "select": true
        }
    },
    // Ctrl + Up/Down (+ Shift) = jump paragraph (and select).
    // Extends existing Ctrl + Left/Right (+ Shift) to paragraphs
    {
        "key": "ctrl+down",
        "command": "cursorMove",
        "when": "editorTextFocus",
        "args": {
            "to": "nextBlankLine"
        }
    },
    {
        "key": "ctrl+up",
        "command": "cursorMove",
        "when": "editorTextFocus",
        "args": {
            "to": "prevBlankLine"
        }
    },
    {
        "key": "ctrl+shift+down",
        "command": "cursorMove",
        "when": "editorTextFocus",
        "args": {
            "to": "nextBlankLine",
            "select": true
        }
    },
    {
        "key": "ctrl+shift+up",
        "command": "cursorMove",
        "when": "editorTextFocus",
        "args": {
            "to": "prevBlankLine",
            "select": true
        }
    },
    // tab : remove AI (so that it's a "safe" key)
    {
        "key": "tab",
        "command": "-geminicodeassist.nextEdit.startSession",
        "when": "authLoggedIn && config.geminicodeassist.enable && editorTextFocus && nextEditSessionAvailable"
    },
    {
        "key": "tab",
        "command": "-geminicodeassist.nextEdit.acceptSuggestion",
        "when": "authLoggedIn && config.geminicodeassist.enable && editorTextFocus && nextEditSessionActive"
    },
    {
        "key": "tab",
        "command": "-editor.action.inlineSuggest.commit",
        "when": "inlineEditIsVisible && tabShouldAcceptInlineEdit && !editorHoverFocused && !editorTabMovesFocus && !suggestWidgetVisible || inlineEditIsVisible && inlineSuggestionVisible && tabShouldAcceptInlineEdit && !editorHoverFocused && !editorTabMovesFocus && !suggestWidgetVisible || inlineSuggestionHasIndentationLessThanTabSize && inlineSuggestionVisible && !editor.hasSelection && !editorHoverFocused && !editorTabMovesFocus && !suggestWidgetVisible || inlineEditIsVisible && inlineSuggestionHasIndentationLessThanTabSize && inlineSuggestionVisible && !editor.hasSelection && !editorHoverFocused && !editorTabMovesFocus && !suggestWidgetVisible"
    },
    {
        "key": "tab",
        "command": "-editor.action.inlineSuggest.commit",
        "when": "inInlineEditsPreviewEditor"
    },
    // insert : AI-related stuff
    {
        "key": "insert",
        "command": "geminicodeassist.nextEdit.startSession",
        "when": "authLoggedIn && config.geminicodeassist.enable && editorTextFocus && nextEditSessionAvailable"
    },
    {
        "key": "insert",
        "command": "geminicodeassist.nextEdit.acceptSuggestion",
        "when": "authLoggedIn && config.geminicodeassist.enable && editorTextFocus && nextEditSessionActive"
    },
    {
        "key": "insert",
        "command": "editor.action.inlineSuggest.commit",
        "when": "inlineEditIsVisible && tabShouldAcceptInlineEdit && !editorHoverFocused && !editorTabMovesFocus && !suggestWidgetVisible || inlineEditIsVisible && inlineSuggestionVisible && tabShouldAcceptInlineEdit && !editorHoverFocused && !editorTabMovesFocus && !suggestWidgetVisible || inlineSuggestionHasIndentationLessThanTabSize && inlineSuggestionVisible && !editor.hasSelection && !editorHoverFocused && !editorTabMovesFocus && !suggestWidgetVisible || inlineEditIsVisible && inlineSuggestionHasIndentationLessThanTabSize && inlineSuggestionVisible && !editor.hasSelection && !editorHoverFocused && !editorTabMovesFocus && !suggestWidgetVisible"
    },
    {
        "key": "insert",
        "command": "editor.action.inlineSuggest.commit",
        "when": "inInlineEditsPreviewEditor"
    },
    {
        // remove that
        "key": "insert",
        "command": "-editor.action.toggleOvertypeInsertMode"
    }
]
